{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Pay from '@/views/pay/index.vue';\nimport Login from '@/views/login';\nimport MyOrder from '@/views/myorder';\nimport Search from '@/views/search/index.vue';\nimport SearchList from '@/views/search/list.vue';\nimport ProDetail from '@/views/prodetail';\nimport store from '@/store';\nconst Layout = () => import('@/views/layout');\nconst User = () => import('@/views/layout/user.vue');\nconst Cart = () => import('@/views/layout/cart.vue');\nconst Home = () => import('@/views/layout/home.vue');\nconst CateGory = () => import('@/views/layout/category.vue');\nVue.use(VueRouter);\nconst router = new VueRouter({\n  routes: [\n  // 独立单独展示为一级路由\n  {\n    path: '/login',\n    component: Login\n  }, {\n    path: '/',\n    component: Layout,\n    redirect: '/home',\n    // 配置二级路由\n    children: [{\n      path: '/home',\n      component: Home\n    }, {\n      path: '/category',\n      component: CateGory\n    }, {\n      path: '/cart',\n      component: Cart\n    }, {\n      path: '/user',\n      component: User\n    }]\n  }, {\n    path: '/pay',\n    component: Pay\n  }, {\n    path: '/search',\n    component: Search\n  }, {\n    path: '/searchlist',\n    component: SearchList\n  },\n  // 动态路由传参需要知道是那个商品\n  {\n    path: '/prodetail/:id',\n    component: ProDetail\n  }, {\n    path: '/myorder',\n    component: MyOrder\n  }]\n});\n// 全局前置导航首位\n// to:到那里去，完整路由信息（路径，参数）\n// from：从哪来，\n// next（）直接放行到to路径 否则拦截到next里面配置的路径\n\n// 定义数组，专门用户需要权限才能访问的页面\nconst authUrls = ['/pay', '/myorder'];\nrouter.beforeEach((to, from, next) => {\n  // console.log(to, from, next)\n  // 判断是否为权限页面，若是权限页面弹出提示框请先登录，负责放行\n  if (!authUrls.includes(to.path)) {\n    next();\n    return;\n  }\n  // 是权限页面，判断用户是否存在登录taken\n  const token = store.getters.token;\n  if (token) {\n    next();\n  } else {\n    // console.log(token)\n    setInterval(() => {\n      next('/login');\n    }, 1000);\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","Pay","Login","MyOrder","Search","SearchList","ProDetail","store","Layout","User","Cart","Home","CateGory","use","router","routes","path","component","redirect","children","authUrls","beforeEach","to","from","next","includes","token","getters","setInterval"],"sources":["D:/vue/vue-demo/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport Pay from '@/views/pay/index.vue'\nimport Login from '@/views/login'\nimport MyOrder from '@/views/myorder'\nimport Search from '@/views/search/index.vue'\nimport SearchList from '@/views/search/list.vue'\nimport ProDetail from '@/views/prodetail'\nimport store from '@/store'\n\nconst Layout = () => import('@/views/layout')\nconst User = () => import('@/views/layout/user.vue')\nconst Cart = () => import('@/views/layout/cart.vue')\nconst Home = () => import('@/views/layout/home.vue')\nconst CateGory = () => import('@/views/layout/category.vue')\nVue.use(VueRouter)\n\nconst router = new VueRouter({\n  routes: [\n    // 独立单独展示为一级路由\n    { path: '/login', component: Login },\n    {\n      path: '/',\n      component: Layout,\n      redirect: '/home',\n      // 配置二级路由\n      children: [\n        { path: '/home', component: Home },\n        { path: '/category', component: CateGory },\n        { path: '/cart', component: Cart },\n        { path: '/user', component: User }\n      ]\n    },\n    { path: '/pay', component: Pay },\n    { path: '/search', component: Search },\n    { path: '/searchlist', component: SearchList },\n    // 动态路由传参需要知道是那个商品\n    { path: '/prodetail/:id', component: ProDetail },\n    { path: '/myorder', component: MyOrder }\n  ]\n})\n// 全局前置导航首位\n// to:到那里去，完整路由信息（路径，参数）\n// from：从哪来，\n// next（）直接放行到to路径 否则拦截到next里面配置的路径\n\n// 定义数组，专门用户需要权限才能访问的页面\nconst authUrls = ['/pay', '/myorder']\nrouter.beforeEach((to, from, next) => {\n  // console.log(to, from, next)\n  // 判断是否为权限页面，若是权限页面弹出提示框请先登录，负责放行\n  if (!authUrls.includes(to.path)) {\n    next()\n    return\n  }\n  // 是权限页面，判断用户是否存在登录taken\n  const token = store.getters.token\n  if (token) {\n    next()\n  } else {\n    // console.log(token)\n    setInterval(() => { next('/login') }, 1000)\n  }\n})\n\nexport default router\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAOC,GAAG,MAAM,uBAAuB;AACvC,OAAOC,KAAK,MAAM,eAAe;AACjC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,KAAK,MAAM,SAAS;AAE3B,MAAMC,MAAM,GAAGA,CAAA,KAAM,MAAM,CAAC,gBAAgB,CAAC;AAC7C,MAAMC,IAAI,GAAGA,CAAA,KAAM,MAAM,CAAC,yBAAyB,CAAC;AACpD,MAAMC,IAAI,GAAGA,CAAA,KAAM,MAAM,CAAC,yBAAyB,CAAC;AACpD,MAAMC,IAAI,GAAGA,CAAA,KAAM,MAAM,CAAC,yBAAyB,CAAC;AACpD,MAAMC,QAAQ,GAAGA,CAAA,KAAM,MAAM,CAAC,6BAA6B,CAAC;AAC5Db,GAAG,CAACc,GAAG,CAACb,SAAS,CAAC;AAElB,MAAMc,MAAM,GAAG,IAAId,SAAS,CAAC;EAC3Be,MAAM,EAAE;EACN;EACA;IAAEC,IAAI,EAAE,QAAQ;IAAEC,SAAS,EAAEf;EAAM,CAAC,EACpC;IACEc,IAAI,EAAE,GAAG;IACTC,SAAS,EAAET,MAAM;IACjBU,QAAQ,EAAE,OAAO;IACjB;IACAC,QAAQ,EAAE,CACR;MAAEH,IAAI,EAAE,OAAO;MAAEC,SAAS,EAAEN;IAAK,CAAC,EAClC;MAAEK,IAAI,EAAE,WAAW;MAAEC,SAAS,EAAEL;IAAS,CAAC,EAC1C;MAAEI,IAAI,EAAE,OAAO;MAAEC,SAAS,EAAEP;IAAK,CAAC,EAClC;MAAEM,IAAI,EAAE,OAAO;MAAEC,SAAS,EAAER;IAAK,CAAC;EAEtC,CAAC,EACD;IAAEO,IAAI,EAAE,MAAM;IAAEC,SAAS,EAAEhB;EAAI,CAAC,EAChC;IAAEe,IAAI,EAAE,SAAS;IAAEC,SAAS,EAAEb;EAAO,CAAC,EACtC;IAAEY,IAAI,EAAE,aAAa;IAAEC,SAAS,EAAEZ;EAAW,CAAC;EAC9C;EACA;IAAEW,IAAI,EAAE,gBAAgB;IAAEC,SAAS,EAAEX;EAAU,CAAC,EAChD;IAAEU,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAEd;EAAQ,CAAC;AAE5C,CAAC,CAAC;AACF;AACA;AACA;AACA;;AAEA;AACA,MAAMiB,QAAQ,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC;AACrCN,MAAM,CAACO,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC;EACA;EACA,IAAI,CAACJ,QAAQ,CAACK,QAAQ,CAACH,EAAE,CAACN,IAAI,CAAC,EAAE;IAC/BQ,IAAI,CAAC,CAAC;IACN;EACF;EACA;EACA,MAAME,KAAK,GAAGnB,KAAK,CAACoB,OAAO,CAACD,KAAK;EACjC,IAAIA,KAAK,EAAE;IACTF,IAAI,CAAC,CAAC;EACR,CAAC,MAAM;IACL;IACAI,WAAW,CAAC,MAAM;MAAEJ,IAAI,CAAC,QAAQ,CAAC;IAAC,CAAC,EAAE,IAAI,CAAC;EAC7C;AACF,CAAC,CAAC;AAEF,eAAeV,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}